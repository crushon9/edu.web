<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JSON parse</title>
</head>
<body>
	<h1>JSON</h1>
	<div id="output"></div>
	<script type="text/javascript">
		// * JSON은 문자열String 형태로 데이터가 교환됨
		// 따라서, 전송이 끝난 뒤 사용을 위해서는 원래 타입으로 변경해야 한다
		// 주로 ajax로 데이터를 통신할 경우 사용
		/*
		
		  [클라이언트JSP] =====================> [서버Servlet]
		JavaScript 데이터						JSON 데이터(String)
		  ↓ parse ↓	JSON.stringify(obj);	 ↓ parse ↓ JSONObject jsonObj = (JSONObject) parser.parse(obj);
		JSON 데이터(String)					Java 데이터(다른언어가능)
		
		  [서버Servlet] =====================> [클라이언트JSP]
		Java 데이터(다른언어가능)				JSON 데이터(String)
		  ↓ parse ↓ jsonObject.put(); 		  ↓ parse ↓ JSON.parse(txt);
		JSON 데이터(String)					JavaScript 데이터
		 
		*/

		// JSON 데이터(String) <parse>	-> JavaScript 데이터	
		// 웹 서버에서 전송받은 JSON데이터를 클라이언트가 JavaScript로 parse하는 경우(Server to client)
		var txt = '{"name" : "mok", "age" : 20,	"city" : "인천", "birth" : "2001-09-26"}';
		console.log(typeof txt); // 결과 String
		document.getElementById("output").innerHTML += txt.name + ", " + txt.birth + "<br>"; // 파싱 전 undefined

		// parse
		var obj = JSON.parse(txt); // JSON을 javaScript 객체로 변환
		obj.birth = new Date(obj.birth); // 날짜 타입은 변환을 따로 해야함 (String -> Date)
		document.getElementById("output").innerHTML += obj.name + ", " + obj.birth; // 파싱 후
	</script>
</body>
</html>